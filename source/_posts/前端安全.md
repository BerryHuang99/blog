---
title: 前端安全
date: 2018-02-14 16:08:21
tags: [security]
categories: note
---

## XSS

### 定义
**跨站脚本**（Cross-site scripting，通常简称为XSS）是一种网站应用程序的安全漏洞攻击，是代码注入的一种。它允许攻击者将代码注入到网页上，其他用户在观看网页时就会受到影响。这类攻击通常包含了HTML以及用户端脚本语言。

### 攻击形式

1. 非持久型攻击
有些网站的网页内容与url参数相关，攻击者找到漏洞地址后，修改其中的url，然后发给别人，诱使别人点击，从而通过执行脚本，获取对方的cookie。攻击者得到对方的cookie后，就可以为所欲为了。这种方式往往是一次性的。

2. 持久型攻击
有些内容生成网站，比如博客站，有非常多的用户输入页。用户敲了一篇博客，存到网站数据库，然后网站读出内容，呈现给其他用户。此时，如果不对用户输出的内容加以过滤，攻击者就可以注入一些js脚本内容。这样，别人点击这篇博客时，已经在执行攻击者所写的js脚本了。

### 危害

1. 获取他人隐私信息；
2. 破坏、修改网站原本页面内容；
3. 跳转到其他恶意页面；
4. 如果页面影响大，可以对其他网站发起DDoS攻击。

### 预防

1. 过滤用户输入：
对于网站上有用户输入的部分，如各种表单内容、富文本内容，都应该对js脚本进行过滤，直接去除或者替换修改。

2. 对不可信输出转义、编码：
对用户输入的内容进行输出时，对其进行转义、编码，防止其中含有恶意脚本。

3. 安全Cookie：
将cookie设置HttpOnly后，js就无法获取到该网站的cookie。自然也没办法将其他用户的隐私信息传到自己的服务器。

4. 提高防范意识、多测试：
利用XSS测试工具对网站进行测试，找出漏洞并及时补救。

## CSRF

### 定义
**跨站请求伪造**（英语：Cross-site request forgery），也被称为 one-click attack 或者 session riding，通常缩写为 CSRF 或者 XSRF，是一种挟制用户在当前已登录的Web应用程序上执行非本意的操作的攻击方法。

### 攻击形势

1. 通过GET请求攻击：
对于一些资源操作请求，比如留言等，使用GET请求时，攻击者可以通过网站伪装成用户，向用户刚刚浏览过的网站服务器发送一条GET请求，修改其中的参数以使服务器按照攻击者的意图执行。

2. 通过XSS进行攻击：
攻击者通过XSS很容易获取到Cookie中的用户信息。通过这些信息，攻击者很容易伪装成用户对服务端进行恶意访问。

### 预防

1. 规范请求类型：
避免使用GET发起资源操作请求；

2. 检查Referer / Origin:
检查请求来源是否为可信任网站；

3. 设置请求Token：
访问页面时，服务端会在页面写入一个随机token值,并设置token生命周期。之后我的请求就必须带上此次token值，请求过的token就会失效，无法再用。登录时的验证码就是在此原理基础之上实现的。

4. 防住第一道防线-XSS
防止Cookie通过XSS被恶意窃取，防止攻击者伪装成用户进行正常访问。

## 参考

[《常见网络攻击--XSS && CSRF》](https://segmentfault.com/a/1190000009514661)
