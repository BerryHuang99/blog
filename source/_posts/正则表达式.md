---
title: 正则表达式
date: 2017-12-03 18:27:38
tags: [RegExp, js, basis]
categories: note
---
**正则表达式**(Regular Expression)是一种文本模式，包括普通字符（例如，a 到 z 之间的字母）和特殊字符（称为"元字符"）。正则表达式通常被用来检索、替换那些符合某个模式(规则)的文本。
## 字符

### 原义文本字符

代表原始字符含义（字母、数字、部分符号），如`abc`、`123`等。

### 元字符

具有特殊含义的非字母字符：

字符|含义
:-:|:-
\|将下一个字符标记为一个特殊字符、或一个原义字符、或一个 向后引用、或一个八进制转义符。
^|匹配输入字符串的开始位置。在[]中表示取反。
$|匹配输入字符串的结束位置。
*|匹配前面的子表达式零次或多次。
+|匹配前面的子表达式一次或多次。
?|匹配前面的子表达式零次或一次。
{n}|n 是一个非负整数。匹配确定的 n 次。
{n,}|n 是一个非负整数。至少匹配n 次。
{n,m}|m 和 n 均为非负整数，其中n <= m。最少匹配 n 次且最多匹配 m 次。**注意在逗号和两个数之间不能有空格。**
?|当该字符紧跟在任何一个其他限制符 (*, +, ?, {n}, {n,}, {n,m}) 后面时，匹配模式是非贪婪的。非贪婪模式尽可能少的匹配所搜索的字符串，而默认的贪婪模式则尽可能多的匹配所搜索的字符串。
.|匹配除换行符（\n、\r）之外的任何单个字符。
(pattern)|匹配 pattern 并获取这一匹配。所获取的匹配可以从产生的 Matches 集合得到，在VBScript 中使用 SubMatches 集合，在JScript 中则使用 $0…$9 属性。要匹配圆括号字符，请使用 '\(' 或 '\)'。
(?:pattern)|匹配 pattern 但不获取匹配结果，也就是说这是一个非获取匹配，不进行存储供以后使用。这在使用 "或" 字符 (&brvbar;) 来组合一个模式的各个部分是很有用。
(?=pattern)|正向肯定预查（look ahead positive assert），在任何匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。
(?!pattern)|正向否定预查(negative assert)，在任何不匹配pattern的字符串开始处匹配查找字符串。这是一个非获取匹配，也就是说，该匹配不需要获取供以后使用。
(?<=pattern)|反向(look behind)肯定预查，与正向肯定预查类似，只是方向相反。**js中不支持**
(?<!pattern)|反向否定预查，与正向否定预查类似，只是方向相反。**js中不支持**
x&brvbar;y|匹配 x 或 y。
[xyz]|字符集合。匹配所包含的任意一个字符。
[^xyz]|负值字符集合。匹配未包含的任意字符。
[a-z]|字符范围。匹配指定范围内的任意字符。
[^a-z]|负值字符范围。匹配任何不在指定范围内的任意字符。
\b|匹配一个单词边界，也就是指单词和空格间的位置。
\B|匹配非单词边界。
\cx|匹配由 x 指明的控制字符。例如， \cM 匹配一个 Control-M 或回车符。x 的值必须为 A-Z 或 a-z 之一。否则，将 c 视为一个原义的 'c' 字符。
\d|匹配一个数字字符。等价于 [0-9]。
\D|匹配一个非数字字符。等价于 [^0-9]。
\f|匹配一个换页符。等价于 \x0c 和 \cL。
\n|匹配一个换行符。等价于 \x0a 和 \cJ。
\r|匹配一个回车符。等价于 \x0d 和 \cM。
\s|匹配任何空白字符，包括空格、制表符、换页符等等。等价于 [ \f\n\r\t\v]。
\S|匹配任何非空白字符。等价于 [^ \f\n\r\t\v]。
\t|匹配一个制表符。等价于 \x09 和 \cI。
\v|匹配一个垂直制表符。等价于 \x0b 和 \cK。
\w|匹配字母、数字、下划线。等价于'[A-Za-z0-9_]'。
\W|匹配非字母、数字、下划线。等价于 '[^A-Za-z0-9_]'。
\un|匹配 n，其中 n 是一个用四个十六进制数字表示的 Unicode 字符。

### 使用规则

1. 表达式内不可有空格；
2. 用量词（{n,m}, +等）修饰整体时，需用`()`包裹分组；
3. 反向引用：对于每个`()`内的分组，在使用时可以通过`$`+顺序号表示，以便更改次序使用：
```js
'2017-12-01'.replace(/(\d{4})-(\d{2})-(\d{2})/g, '$3\/$2\/$1');
// "01/12/2017"
```
4. 对于多行字符串匹配使用`^`与`$`表示开头结尾时，在表达式结束后标注m以表示每行作为新的匹配开始。

## JavaScript使用

### String.replace(regExp, arr)
用于替换匹配好的字符串。
```js
'ThIS is my blog which is based on hexo.'.replace(/\Bis\b/gi, 'at');
// 'That is my blog which is based on hexo.'
```

### String.search(regExp)
查找匹配表达式的子串出现的位置标号。
```js
'Ewan HUANG'.search(/huang/gi); // 6
```

### String.match(regExp)
选出匹配规则的字符串组成一个数组集合。
```js
'123abc456def789'.match(/\d+/g);
// ["123", "456", "789"]
'123456789'.match(/\d{3,6}?/g);
// ["123", "456", "789"] 非贪婪
'123456789'.match(/\d{3,6}/g);
// ["123456", "789"] 贪婪
```

### RegExp.test(string)
用于测试字符串是否匹配正则模式。
```js
var r = /^([a-zA-Z0-9-_/])+@([a-zA-Z0-9-_])+((\.[a-zA-Z]+)+)$/;
r.test('Ewanhuang99@gmail.com'); // true
r.test('Ewanhuang99@gmail.vip.com'); // true
```

> 注，每次test之后，原正则表达式的匹配起始点将向后移动到下一个匹配点（`r.lastIndex`）。因此，当多次重复调用test时，结果未必都相同。

### RegExp.exec(string)
用于检索字符串中正则匹配的第一个子串，返回其信息对象（匹配位置，匹配对象等），然后移动匹配位置到子串之后（循环移动）。没有匹配则返回`null`。
```js
var r = /\d+/g;
r.exec('123abc456deg');
// ["123", index: 0, input: "123abc456deg", groups: undefined]
r.exec('123abc456deg');
// ["456", index: 6, input: "123abc456deg", groups: undefined]
r.exec('123abc456deg');
// null
```

## 参考
[www.runoob.com](http://www.runoob.com)
